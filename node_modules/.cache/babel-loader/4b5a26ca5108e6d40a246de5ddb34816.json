{"ast":null,"code":"import _asyncToGenerator from\"/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UniTipBar(props){var ref=React.useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),d=_useState2[0],setD=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),dName=_useState4[0],setdName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var i,caseColor,svg;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(props.uniData);for(i=0;i<props.data5.length;i++){if(props.data5[i].properties.name==props.searchInput){setD(props.data5[i].properties);}}if(d.name){setdName(d.name);}if(props.searchData.length){setCount(props.searchData.length);}console.log(\"UniNameIs\".concat(dName));caseColor=d3.scaleLinear().domain([0,1,2,3]).range([\"#f2b59d\",\"#e56249\",\"#cc3c31\",\"#a52723\"]);svg=d3.select(ref.current);svg.selectAll(\"*\").remove();svg.selectAll(\".caseCircle\").data(props.uniData).enter().append(\"circle\").attr(\"cx\",function(d,i){if(props.selectSerious){return 480;}else{return 180+i*200;}}).attr(\"cy\",80).attr(\"r\",function(d,i){if(d==0){return 0;}else{if(props.selectLowerRange){return 10.0+d*160/100;}else if(props.selectSerious){if(i==3){return d*20.0;}}else{return 10.0+d*160/300;}}}).attr(\"fill\",function(d,i){return caseColor(i);});case 9:case\"end\":return _context.stop();}}},_callee);}))();},[props.searchInput,props.uniData]);return/*#__PURE__*/_jsx(\"div\",{children:props.callUniTip&&/*#__PURE__*/_jsxs(\"div\",{class:\"universityTip\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"universityChart\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 960 120\",ref:ref,className:\"caseCircleLine\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"name important-font\",children:[dName,\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"huge important-font\",children:props.selectSerious&&\"HUGE\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" CASES in \",props.selectLowerRange&&\"200km\",!props.selectLowerRange&&\"500km\",\" \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"count important-font\",children:count})]})]})});}export default UniTipBar;","map":{"version":3,"sources":["/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/src/widgets/UniTipBar.js"],"names":["React","useState","useEffect","d3","UniTipBar","props","ref","useRef","d","setD","dName","setdName","count","setCount","console","log","uniData","i","data5","length","properties","name","searchInput","searchData","caseColor","scaleLinear","domain","range","svg","select","current","selectAll","remove","data","enter","append","attr","selectSerious","selectLowerRange","callUniTip"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport * as d3 from \"d3\"\n\nfunction UniTipBar(props) {\n    const ref = React.useRef(null)\n    const [d, setD] = useState(null)\n    const [dName,setdName] = useState(null)\n    const [count,setCount] = useState(null)\n\n    useEffect(() => {\n        (async () => {\n        console.log(props.uniData)\n        for (var i = 0; i < props.data5.length; i++) {\n            if (props.data5[i].properties.name == props.searchInput) {\n                setD(props.data5[i].properties)\n            }\n        }\n        if(d.name) {\n        setdName(d.name)\n        }\n        if(props.searchData.length) {\n        setCount(props.searchData.length)\n        }\n\n        console.log(`UniNameIs${dName}`)\n\n        const caseColor = d3.scaleLinear().domain([0, 1, 2, 3]).range([\"#f2b59d\", \"#e56249\", \"#cc3c31\", \"#a52723\"])\n\n        const svg = d3.select(ref.current);\n        svg.selectAll(\"*\").remove();\n\n        svg.selectAll(\".caseCircle\").data(props.uniData).enter().append(\"circle\")\n        .attr(\"cx\", function (d, i) { \n            if(props.selectSerious){\n                return 480\n            }else{\n                return 180 + i * 200 \n            }\n        })\n        .attr(\"cy\", 80)\n        .attr(\"r\",\n            function (d,i) {\n                if (d==0){\n                    return 0\n                }else{\n                if (props.selectLowerRange) {\n                    return 10.0 + d * 160 / 100\n                }else if(props.selectSerious){\n                    if (i==3){\n                        return d * 20.0\n                    }\n                }else {\n                    return 10.0 + d * 160 / 300\n                }\n            }\n            })\n        .attr(\"fill\", function (d, i){ \n            return caseColor(i) \n        })\n\n\n    })();\n\n    }, [props.searchInput, props.uniData])\n\n    return (\n        <div>\n            {props.callUniTip &&\n\n                <div class='universityTip'>\n                    <div class='universityChart'>\n                        <svg viewBox=\"0 0 960 120\" ref={ref} className=\"caseCircleLine\" ></svg>\n                    </div>\n                    <p>\n                        <span className='name important-font'>{dName} </span>\n                        <br />\n                        <span className=\"huge important-font\">{props.selectSerious && \"HUGE\"}</span><span> CASES in {props.selectLowerRange && \"200km\"}{!props.selectLowerRange && \"500km\"} </span><span className=\"count important-font\">{count}</span>\n                    </p>\n                </div>\n            }\n        </div>\n    )\n\n\n}\n\nexport default UniTipBar"]},"metadata":{},"sourceType":"module"}