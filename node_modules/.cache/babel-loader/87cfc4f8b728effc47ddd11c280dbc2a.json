{"ast":null,"code":"import _asyncToGenerator from\"/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import Map from'./charts/Map';import Mouse from'./components/Mouse';import Title from'./widgets/Title';import ControlBar from'./widgets/ControlBar';import SubPage from'./widgets/SubPage';import SearchBar from'./widgets/SearchBar';import ChartExample from'./widgets/ChartExample';import UniTipBar from'./widgets/UniTipBar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),data1=_React$useState2[0],setData1=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),data2=_React$useState4[0],setData2=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),data3=_React$useState6[0],setData3=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),data4=_React$useState8[0],setData4=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),data5=_React$useState10[0],setData5=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),uniData=_React$useState12[0],setUniData=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),searchData=_React$useState14[0],setSearchData=_React$useState14[1];// const [select, setSelect] = React.useState([]);\nvar _React$useState15=React.useState(true),_React$useState16=_slicedToArray(_React$useState15,2),loading=_React$useState16[0],setLoading=_React$useState16[1];var _React$useState17=React.useState(900),_React$useState18=_slicedToArray(_React$useState17,2),scaleData=_React$useState18[0],setScaleData=_React$useState18[1];var _React$useState19=React.useState(12),_React$useState20=_slicedToArray(_React$useState19,2),pace=_React$useState20[0],setPace=_React$useState20[1];var _React$useState21=React.useState([]),_React$useState22=_slicedToArray(_React$useState21,2),offset=_React$useState22[0],setOffset=_React$useState22[1];var _React$useState23=React.useState(true),_React$useState24=_slicedToArray(_React$useState23,2),selectCases=_React$useState24[0],setSelectCases=_React$useState24[1];var _React$useState25=React.useState(true),_React$useState26=_slicedToArray(_React$useState25,2),selectPolicy=_React$useState26[0],setSelectPolicy=_React$useState26[1];var _React$useState27=React.useState(false),_React$useState28=_slicedToArray(_React$useState27,2),selectGunRate=_React$useState28[0],setSelectGunRate=_React$useState28[1];var _React$useState29=React.useState(false),_React$useState30=_slicedToArray(_React$useState29,2),selectVote=_React$useState30[0],setSelectVote=_React$useState30[1];var _React$useState31=React.useState(false),_React$useState32=_slicedToArray(_React$useState31,2),selectCity=_React$useState32[0],setSelectCity=_React$useState32[1];var _React$useState33=React.useState(true),_React$useState34=_slicedToArray(_React$useState33,2),selectUni=_React$useState34[0],setSelectUni=_React$useState34[1];var _React$useState35=React.useState(1.0),_React$useState36=_slicedToArray(_React$useState35,2),bigTitleIsShow=_React$useState36[0],setBigTitleIsShow=_React$useState36[1];var _React$useState37=React.useState(500.0),_React$useState38=_slicedToArray(_React$useState37,2),searchRange=_React$useState38[0],setSearchRange=_React$useState38[1];var _React$useState39=React.useState(false),_React$useState40=_slicedToArray(_React$useState39,2),selectSerious=_React$useState40[0],setSelectSerious=_React$useState40[1];var _React$useState41=React.useState(false),_React$useState42=_slicedToArray(_React$useState41,2),selectLowerRange=_React$useState42[0],setSelectLowerRange=_React$useState42[1];var _React$useState43=React.useState(\"\"),_React$useState44=_slicedToArray(_React$useState43,2),searchInput=_React$useState44[0],setSearchInput=_React$useState44[1];// const [setIsChange,setSetIsChange]=React.useState(false)\nvar _React$useState45=React.useState([false,false,\"\"]),_React$useState46=_slicedToArray(_React$useState45,2),searchState=_React$useState46[0],setSearchState=_React$useState46[1];var _React$useState47=React.useState(false),_React$useState48=_slicedToArray(_React$useState47,2),callUniTip=_React$useState48[0],setCallUniTip=_React$useState48[1];// const [inputStart,setInputStart] = React.useState(\"\")\nReact.useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res1,data1,res2,data2,res3,data3Combine,data3,res5,data5Combine,data5;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('./data/policy.json');case 2:res1=_context.sent;_context.next=5;return res1.json();case 5:data1=_context.sent;setData1(data1);console.log(data1.total);_context.next=10;return fetch('./data/policy.json');case 10:res2=_context.sent;_context.next=13;return res2.json();case 13:data2=_context.sent;setData2(data2);_context.next=17;return fetch('./data/cases.geojson');case 17:res3=_context.sent;_context.next=20;return res3.json();case 20:data3Combine=_context.sent;data3=data3Combine.features;setData3(data3);// const res4 = await fetch('./colorTest4.json')\n// const data4 = await res4.json();\n// setData4(data4);\n// setSelect([true, true, true, true])\n_context.next=25;return fetch('./data/univercity.json');case 25:res5=_context.sent;_context.next=28;return res5.json();case 28:data5Combine=_context.sent;data5=data5Combine.features;setData5(data5);setSelectCases(true);setSelectPolicy(true);setSelectGunRate(false);setSelectVote(false);setSelectCity(false);setSelectUni(true);setSelectLowerRange(false);setSelectSerious(false);setLoading(false);setScaleData(900);setPace(12);setOffset([50,50]);setSearchData([]);setBigTitleIsShow(1.0);setSearchRange(500.0);setSearchInput(\"\");setSearchState([false,false,\"\"]);setCallUniTip(false);setUniData([]);// setInputStart('')\ncase 50:case\"end\":return _context.stop();}}},_callee);}))();},[]);var scaleBig=function scaleBig(){// let scale = 900+(event.target.value-50)*15;\nsetScaleData(1400);setPace(1.5);console.log(scaleData);setOffset([250,350]);};var scaleSmall=function scaleSmall(){// let scale = 900+(event.target.value-50)*15;\nsetScaleData(600);setPace(15.0);console.log(scaleData);setOffset([50,100]);};var scaleOrigin=function scaleOrigin(){// let scale = 900;\nsetScaleData(900);setPace(12.0);console.log(scaleData);setOffset([50,50]);};var selectChangeGunRate=function selectChangeGunRate(){if(selectGunRate){setSelectGunRate(false);// setSelectPolicy(true)\n}else{setSelectGunRate(true);if(setSelectPolicy){setSelectPolicy(false);}}// setAnimation(true)\n};var selectChangePolicy=function selectChangePolicy(){if(selectPolicy){setSelectPolicy(false);// setSelectGunRate(true)\n}else{setSelectPolicy(true);if(selectGunRate){setSelectGunRate(false);}}// setAnimation(true)\n};var selectChangeCases=function selectChangeCases(){if(selectCases){setSelectCases(false);}else{setSelectCases(true);}};var selectChangeVote=function selectChangeVote(){if(selectVote){setSelectVote(false);}else{setSelectVote(true);}};var selectChangeCity=function selectChangeCity(){if(selectCity){setSelectCity(false);}else{setSelectCity(true);}};var selectChangeUni=function selectChangeUni(){if(selectUni){setSelectUni(false);}else{setSelectUni(true);}};var selectChangeLowerRange=function selectChangeLowerRange(){setSearchData([]);if(selectLowerRange){setSelectLowerRange(false);setSearchRange(500.0);}else{setSelectLowerRange(true);setSearchRange(200.0);if(selectSerious){setSelectSerious(false);}}// findnear(searchInput)\n};var selectChangeSerious=function selectChangeSerious(){setSearchData([]);if(selectSerious){setSelectSerious(false);}else{setSelectSerious(true);if(selectLowerRange){setSelectLowerRange(false);setSearchRange(500.0);}}// findnear(searchInput)\n// console.log(\"second\")\n};var reset=function reset(){setSelectCases(true);setSelectPolicy(true);setSelectGunRate(false);setSelectVote(false);setSelectCity(false);setSelectUni(true);setSelectLowerRange(false);setSelectSerious(false);setLoading(false);setScaleData(900);setPace(12);setOffset([50,50]);setSearchData(null);setBigTitleIsShow(1.0);setSearchRange(500.0);setSearchInput(\"\");setSearchState([false,false,\"\"]);setCallUniTip(false);setUniData([]);// setInputStart('')\n};//计算两点（经纬度坐标）相隔距离，返回距离单位为公里（KM）\nfunction GetDistance(lat1,lng1,lat2,lng2){var radLat1=lat1*Math.PI/180.0;var radLat2=lat2*Math.PI/180.0;var a=radLat1-radLat2;var b=lng1*Math.PI/180.0-lng2*Math.PI/180.0;var s=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(radLat1)*Math.cos(radLat2)*Math.pow(Math.sin(b/2),2)));s=s*6378.137;// EARTH_RADIUS\ns=Math.round(s*10000)/10000;return s;}var findnear=function findnear(u){// var u=\"University of Tulsa\"\n// console.log(`FuncTrigger`)\nvar result=new Array();var resultList=[0,0,0,0];var find=false;var findi=0;for(var i=0;i<data5.length;i++){if(data5[i].properties.name==u){find=true;findi=i;}}// console.log(`${searchRange}+${selectSerious}+${selectLowerRange}`)\nif(find==false){return[];}else{if(searchState[2]!=u){setSearchInput(u);setCallUniTip(true);setSelectUni(true);console.log(\"input=\".concat(u));// setSearchState([searchState[0],searchState[1],u])\n}console.log(\"IfTrigger\");for(var j=0;j<data3.length;j++){if(GetDistance(data5[findi].geometry.coordinates[1],data5[findi].geometry.coordinates[0],data3[j].geometry.coordinates[1],data3[j].geometry.coordinates[0])<searchRange){// resultList.push(data3[j])\nif(parseInt(data3[j].properties.killed)+parseInt(data3[j].properties.injured)<5){resultList[0]+=1;}else if(parseInt(data3[j].properties.killed)+parseInt(data3[j].properties.injured)<10){resultList[1]+=1;}else if(parseInt(data3[j].properties.killed)+parseInt(data3[j].properties.injured)<20){resultList[2]+=1;}else{resultList[3]+=1;}if(selectSerious){// console.log(parseInt(data3[j].killed)+parseInt(data3[j].injured))\nif(parseInt(data3[j].properties.killed)+parseInt(data3[j].properties.injured)>=20){result.push([[data5[findi].geometry.coordinates[0],data5[findi].geometry.coordinates[1]],[data3[j].geometry.coordinates[0],data3[j].geometry.coordinates[1]]]);}}else{result.push([[data5[findi].geometry.coordinates[0],data5[findi].geometry.coordinates[1]],[data3[j].geometry.coordinates[0],data3[j].geometry.coordinates[1]]]);}}}if(searchState[3]!=result){setSearchData(result);setUniData(resultList);console.log(\"resultSet\");return result;}}};// console.log(`AppTrigger`)\n// console.log(select[0])\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",id:\"App-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"background-point-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"background-point\"})}),/*#__PURE__*/_jsx(Title,{bigTitleIsShow:bigTitleIsShow,reset:reset}),/*#__PURE__*/_jsx(\"div\",{className:\"HideOverFlow\",children:/*#__PURE__*/_jsx(Mouse,{children:function children(_ref2){var x=_ref2.x,y=_ref2.y;return/*#__PURE__*/_jsx(\"div\",{className:\"Map-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"MouseControl\",style:{position:'absolute',top:-y/pace+offset[0],left:-x/pace+offset[1]},children:[loading&&/*#__PURE__*/_jsx(\"div\",{children:\"loading\"}),!loading&&/*#__PURE__*/_jsx(Map,{data1:data1,data2:data2,data3:data3,data5:data5,scaleSend:scaleData,selectCases:selectCases,selectPolicy:selectPolicy,selectGunRate:selectGunRate,selectVote:selectVote,selectCity:selectCity,selectUni:selectUni,selectSerious:selectSerious,selectLowerRange:selectLowerRange,searchData:searchData,findnear:findnear,searchInput:searchInput,searchState:searchState,setSearchState:setSearchState// setIsChange={setIsChange}\n// className=\"Map\"\n})]})});}})}),/*#__PURE__*/_jsx(SearchBar,{data5:data5,findnear:findnear,selectSerious:selectSerious,selectLowerRange:selectLowerRange,clickEventsLower:selectChangeLowerRange,clickEventsSerious:selectChangeSerious// inputStart={inputStart}\n// setSearchInput={setSearchInput}\n}),/*#__PURE__*/_jsx(ControlBar,{selectCases:selectCases,selectPolicy:selectPolicy,selectGunRate:selectGunRate,selectVote:selectVote,selectCity:selectCity,selectUni:selectUni,clickEventsCases:selectChangeCases,clickEventsPolicy:selectChangePolicy,clickEventsGunRate:selectChangeGunRate,clickEventsVote:selectChangeVote,clickEventsCity:selectChangeCity,clickEventsUni:selectChangeUni// scaleChange={scaleChange}\n,scaleBig:scaleBig,scaleSmall:scaleSmall,scaleOrigin:scaleOrigin,data5:data5,findnear:findnear}),/*#__PURE__*/_jsx(UniTipBar,{data5:data5,searchInput:searchInput,callUniTip:callUniTip,searchData:searchData,selectSerious:selectSerious,selectLowerRange:selectLowerRange,uniData:uniData}),/*#__PURE__*/_jsx(SubPage,{selectCases:selectCases,selectPolicy:selectPolicy,selectGunRate:selectGunRate,selectVote:selectVote,setSelectCases:setSelectCases,setSelectGunRate:setSelectGunRate,setSelectPolicy:setSelectPolicy,setSelectVote:setSelectVote// setBigTitleIsShow={setBigTitleIsShow}\n}),/*#__PURE__*/_jsx(ChartExample,{selectCases:selectCases,selectPolicy:selectPolicy,selectGunRate:selectGunRate,selectVote:selectVote})]})});}export default App;","map":{"version":3,"sources":["/Users/lion/Documents/GitHub/Gun_Violence_US_Visualization/src/App.js"],"names":["React","Map","Mouse","Title","ControlBar","SubPage","SearchBar","ChartExample","UniTipBar","App","useState","data1","setData1","data2","setData2","data3","setData3","data4","setData4","data5","setData5","uniData","setUniData","searchData","setSearchData","loading","setLoading","scaleData","setScaleData","pace","setPace","offset","setOffset","selectCases","setSelectCases","selectPolicy","setSelectPolicy","selectGunRate","setSelectGunRate","selectVote","setSelectVote","selectCity","setSelectCity","selectUni","setSelectUni","bigTitleIsShow","setBigTitleIsShow","searchRange","setSearchRange","selectSerious","setSelectSerious","selectLowerRange","setSelectLowerRange","searchInput","setSearchInput","searchState","setSearchState","callUniTip","setCallUniTip","useEffect","fetch","res1","json","console","log","total","res2","res3","data3Combine","features","res5","data5Combine","scaleBig","scaleSmall","scaleOrigin","selectChangeGunRate","selectChangePolicy","selectChangeCases","selectChangeVote","selectChangeCity","selectChangeUni","selectChangeLowerRange","selectChangeSerious","reset","GetDistance","lat1","lng1","lat2","lng2","radLat1","Math","PI","radLat2","a","b","s","asin","sqrt","pow","sin","cos","round","findnear","u","result","Array","resultList","find","findi","i","length","properties","name","j","geometry","coordinates","parseInt","killed","injured","push","x","y","position","top","left"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Map from './charts/Map';\nimport Mouse from './components/Mouse'\nimport Title from './widgets/Title'\nimport ControlBar from './widgets/ControlBar'\nimport SubPage from './widgets/SubPage'\nimport SearchBar from './widgets/SearchBar';\nimport ChartExample from './widgets/ChartExample'\nimport UniTipBar from './widgets/UniTipBar'\n\n\nfunction App() {\n\n  const [data1, setData1] = React.useState([]);\n  const [data2, setData2] = React.useState([]);\n  const [data3, setData3] = React.useState([]);\n  const [data4, setData4] = React.useState([]);\n  const [data5, setData5] = React.useState([]);\n\n  const [uniData,setUniData] = React.useState([]);\n\n  const [searchData, setSearchData] = React.useState([]);\n\n  // const [select, setSelect] = React.useState([]);\n  const [loading, setLoading] = React.useState(true);\n  const [scaleData, setScaleData] = React.useState(900);\n  const [pace, setPace] = React.useState(12);\n  const [offset, setOffset] = React.useState([]);\n\n  const [selectCases, setSelectCases] = React.useState(true);\n  const [selectPolicy, setSelectPolicy] = React.useState(true);\n  const [selectGunRate, setSelectGunRate] = React.useState(false);\n  const [selectVote, setSelectVote] = React.useState(false);\n\n  const [selectCity, setSelectCity] = React.useState(false);\n  const [selectUni, setSelectUni] = React.useState(true);\n\n  const [bigTitleIsShow, setBigTitleIsShow] = React.useState(1.0)\n\n  const [searchRange, setSearchRange] = React.useState(500.0)\n\n  const [selectSerious, setSelectSerious] = React.useState(false)\n  const [selectLowerRange, setSelectLowerRange] = React.useState(false)\n\n  const [searchInput, setSearchInput] = React.useState(\"\")\n  // const [setIsChange,setSetIsChange]=React.useState(false)\n  const [searchState,setSearchState]=React.useState([false,false,\"\"])\n  const [callUniTip,setCallUniTip] = React.useState(false)\n\n  // const [inputStart,setInputStart] = React.useState(\"\")\n\n  React.useEffect(() => {\n    (async () => {\n      const res1 = await fetch('./data/policy.json')\n      const data1 = await res1.json();\n      setData1(data1);\n      console.log(data1.total);\n\n      const res2 = await fetch('./data/policy.json')\n      const data2 = await res2.json();\n      setData2(data2);\n\n      const res3 = await fetch('./data/cases.geojson')\n      const data3Combine = await res3.json();\n      const data3 = data3Combine.features;\n      setData3(data3);\n\n      // const res4 = await fetch('./colorTest4.json')\n      // const data4 = await res4.json();\n      // setData4(data4);\n\n      // setSelect([true, true, true, true])\n\n      const res5 = await fetch('./data/univercity.json')\n      const data5Combine = await res5.json();\n      const data5 = data5Combine.features;\n      setData5(data5);\n\n      setSelectCases(true)\n      setSelectPolicy(true)\n      setSelectGunRate(false)\n      setSelectVote(false)\n\n      setSelectCity(false)\n      setSelectUni(true)\n\n      setSelectLowerRange(false)\n      setSelectSerious(false)\n\n      setLoading(false);\n\n      setScaleData(900);\n\n      setPace(12);\n\n      setOffset([50, 50])\n\n      setSearchData([])\n\n      setBigTitleIsShow(1.0)\n\n      setSearchRange(500.0)\n\n      setSearchInput(\"\")\n\n      setSearchState([false,false,\"\"])\n      setCallUniTip(false)\n\n      setUniData([])\n\n      // setInputStart('')\n\n    })();\n  }, []);\n\n  const scaleBig = () => {\n\n    // let scale = 900+(event.target.value-50)*15;\n    setScaleData(1400);\n    setPace(1.5);\n    console.log(scaleData)\n    setOffset([250, 350])\n\n  }\n\n  const scaleSmall = () => {\n\n    // let scale = 900+(event.target.value-50)*15;\n    setScaleData(600);\n    setPace(15.0);\n    console.log(scaleData)\n    setOffset([50, 100])\n\n  }\n\n  const scaleOrigin = () => {\n\n    // let scale = 900;\n    setScaleData(900);\n    setPace(12.0);\n    console.log(scaleData)\n    setOffset([50, 50])\n\n  }\n\n  const selectChangeGunRate = () => {\n    if (selectGunRate) {\n      setSelectGunRate(false)\n      // setSelectPolicy(true)\n    } else {\n      setSelectGunRate(true)\n      if (setSelectPolicy) {\n        setSelectPolicy(false)\n      }\n    }\n    // setAnimation(true)\n  }\n\n  const selectChangePolicy = () => {\n    if (selectPolicy) {\n      setSelectPolicy(false)\n      // setSelectGunRate(true)\n    } else {\n      setSelectPolicy(true)\n      if (selectGunRate) {\n        setSelectGunRate(false)\n      }\n    }\n    // setAnimation(true)\n  }\n\n  const selectChangeCases = () => {\n    if (selectCases) {\n      setSelectCases(false)\n    } else {\n      setSelectCases(true)\n    }\n  }\n\n  const selectChangeVote = () => {\n    if (selectVote) {\n      setSelectVote(false)\n    } else {\n      setSelectVote(true)\n    }\n  }\n\n  const selectChangeCity = () => {\n    if (selectCity) {\n      setSelectCity(false)\n    } else {\n      setSelectCity(true)\n    }\n  }\n\n  const selectChangeUni = () => {\n    if (selectUni) {\n      setSelectUni(false)\n    } else {\n      setSelectUni(true)\n    }\n  }\n\n  const selectChangeLowerRange = () => {\n    setSearchData([])\n\n    if (selectLowerRange) {\n      setSelectLowerRange(false)\n      setSearchRange(500.0)\n    } else {\n      setSelectLowerRange(true)\n      setSearchRange(200.0)\n      if (selectSerious) {\n        setSelectSerious(false)\n      }\n    }\n    // findnear(searchInput)\n  }\n\n  const selectChangeSerious = () => {\n    setSearchData([])\n    if (selectSerious) {\n      setSelectSerious(false)\n\n    } else {\n      setSelectSerious(true)\n      if (selectLowerRange) {\n        setSelectLowerRange(false)\n        setSearchRange(500.0)\n      }\n    }\n    // findnear(searchInput)\n    // console.log(\"second\")\n\n  }\n\n  const reset = () => {\n    setSelectCases(true)\n    setSelectPolicy(true)\n    setSelectGunRate(false)\n    setSelectVote(false)\n\n    setSelectCity(false)\n    setSelectUni(true)\n\n    setSelectLowerRange(false)\n    setSelectSerious(false)\n\n    setLoading(false);\n\n    setScaleData(900);\n\n    setPace(12);\n\n    setOffset([50, 50])\n\n    setSearchData(null)\n\n    setBigTitleIsShow(1.0)\n\n    setSearchRange(500.0)\n    setSearchInput(\"\")\n\n    setSearchState([false,false,\"\"])\n    setCallUniTip(false)\n\n    setUniData([])\n    // setInputStart('')\n  }\n\n  //计算两点（经纬度坐标）相隔距离，返回距离单位为公里（KM）\n  function GetDistance(lat1, lng1, lat2, lng2) {\n    var radLat1 = lat1 * Math.PI / 180.0;\n    var radLat2 = lat2 * Math.PI / 180.0;\n    var a = radLat1 - radLat2;\n    var b = lng1 * Math.PI / 180.0 - lng2 * Math.PI / 180.0;\n    var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));\n    s = s * 6378.137;// EARTH_RADIUS\n    s = Math.round(s * 10000) / 10000;\n    return s;\n  }\n\n  const findnear = (u) => {\n    // var u=\"University of Tulsa\"\n    // console.log(`FuncTrigger`)\n\n    var result = new Array();\n    var resultList = [0,0,0,0];\n    var find = false;\n    var findi = 0;\n    for (var i = 0; i < data5.length; i++) {\n      if (data5[i].properties.name == u) {\n        find = true;\n        findi = i;\n      }\n    }\n    // console.log(`${searchRange}+${selectSerious}+${selectLowerRange}`)\n    if (find == false) {\n      return [];\n    } else {\n      if ((searchState[2])!=u){\n      setSearchInput(u)\n      setCallUniTip(true)\n      setSelectUni(true)\n      console.log(`input=${u}`)\n        // setSearchState([searchState[0],searchState[1],u])\n      }\n      console.log(`IfTrigger`)\n      for (var j = 0; j < data3.length; j++) {\n        if (GetDistance(data5[findi].geometry.coordinates[1], data5[findi].geometry.coordinates[0], data3[j].geometry.coordinates[1], data3[j].geometry.coordinates[0]) < searchRange) {\n          // resultList.push(data3[j])\n\n          if (parseInt(data3[j].properties.killed) + parseInt(data3[j].properties.injured) <5) {\n            resultList[0]+=1\n          }else if(parseInt(data3[j].properties.killed) + parseInt(data3[j].properties.injured) <10){\n            resultList[1]+=1\n          }else if(parseInt(data3[j].properties.killed) + parseInt(data3[j].properties.injured) <20){\n            resultList[2]+=1\n          }else{\n            resultList[3]+=1\n          }\n\n          if (selectSerious) {\n            // console.log(parseInt(data3[j].killed)+parseInt(data3[j].injured))\n            \n            if (parseInt(data3[j].properties.killed) + parseInt(data3[j].properties.injured) >= 20) {\n              result.push([[data5[findi].geometry.coordinates[0], data5[findi].geometry.coordinates[1]], [data3[j].geometry.coordinates[0], data3[j].geometry.coordinates[1]]])\n              \n            }\n          } else {\n            result.push([[data5[findi].geometry.coordinates[0], data5[findi].geometry.coordinates[1]], [data3[j].geometry.coordinates[0], data3[j].geometry.coordinates[1]]])\n          }\n        }\n      }\n      if (searchState[3] != result){\n        setSearchData(result) \n        setUniData(resultList)\n        console.log(\"resultSet\")\n        return result;\n      }\n    }\n  }\n\n  // console.log(`AppTrigger`)\n  // console.log(select[0])\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\" id=\"App-header\">\n        \n        <div className=\"background-point-container\">\n        {/* <Mouse>\n            {({ x, y }) => (\n                <div\n                  className=\"MouseControl\"\n                  style={{\n                    position: 'absolute',\n                    top: y / 15,\n                    left: x / 15\n                  }}> */}\n                    <div className=\"background-point\">\n                      \n                    </div>\n                {/* </div>\n              \n            )}\n        </Mouse> */}\n        </div>\n        <Title\n          bigTitleIsShow={bigTitleIsShow}\n          reset={reset}\n        />\n        <div className=\"HideOverFlow\">\n          <Mouse>\n            {({ x, y }) => (\n              <div className=\"Map-container\">\n                <div\n                  className=\"MouseControl\"\n                  style={{\n                    position: 'absolute',\n                    top: -y / pace + offset[0],\n                    left: -x / pace + offset[1]\n                  }}>\n                  {loading && <div>loading</div>}\n                  {!loading &&\n\n                    <Map\n                      data1={data1}\n                      data2={data2}\n                      data3={data3}\n                      data5={data5}\n                      scaleSend={scaleData}\n                      selectCases={selectCases}\n                      selectPolicy={selectPolicy}\n                      selectGunRate={selectGunRate}\n                      selectVote={selectVote}\n                      selectCity={selectCity}\n                      selectUni={selectUni}\n                      selectSerious={selectSerious}\n                      selectLowerRange={selectLowerRange}\n                      searchData={searchData}\n                      findnear={findnear}\n                      searchInput={searchInput}\n                      searchState={searchState}\n                      setSearchState={setSearchState}\n                    // setIsChange={setIsChange}\n                    // className=\"Map\"\n                    />\n\n                  }\n                </div>\n              </div>\n            )}\n          </Mouse>\n        </div>\n        <SearchBar\n          data5={data5}\n          findnear={findnear}\n          selectSerious={selectSerious}\n          selectLowerRange={selectLowerRange}\n          clickEventsLower={selectChangeLowerRange}\n          clickEventsSerious={selectChangeSerious}\n          // inputStart={inputStart}\n        // setSearchInput={setSearchInput}\n        />\n        <ControlBar\n          selectCases={selectCases}\n          selectPolicy={selectPolicy}\n          selectGunRate={selectGunRate}\n          selectVote={selectVote}\n          selectCity={selectCity}\n          selectUni={selectUni}\n          clickEventsCases={selectChangeCases}\n          clickEventsPolicy={selectChangePolicy}\n          clickEventsGunRate={selectChangeGunRate}\n          clickEventsVote={selectChangeVote}\n          clickEventsCity={selectChangeCity}\n          clickEventsUni={selectChangeUni}\n          // scaleChange={scaleChange}\n          scaleBig={scaleBig}\n          scaleSmall={scaleSmall}\n          scaleOrigin={scaleOrigin}\n          data5={data5}\n          findnear={findnear}\n        />\n\n        <UniTipBar\n          data5={data5}\n          searchInput={searchInput}\n          callUniTip={callUniTip}\n          searchData={searchData}\n\n          selectSerious={selectSerious}\n          selectLowerRange={selectLowerRange}\n          uniData={uniData}\n        />\n\n        {/* <Statistics/> */}\n        {/* <Profile /> */}\n\n          <SubPage\n            selectCases={selectCases}\n            selectPolicy={selectPolicy}\n            selectGunRate={selectGunRate}\n            selectVote={selectVote}\n            setSelectCases={setSelectCases}\n            setSelectGunRate={setSelectGunRate}\n            setSelectPolicy={setSelectPolicy}\n            setSelectVote={setSelectVote}\n\n          // setBigTitleIsShow={setBigTitleIsShow}\n          />\n        {/* </div> */}\n\n        <ChartExample\n          selectCases={selectCases}\n          selectPolicy={selectPolicy}\n          selectGunRate={selectGunRate}\n          selectVote={selectVote}\n        />\n      </header>\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}